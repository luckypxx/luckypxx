---
layout: post
title: 函数调用约定
date: 2018-06-05
tag: 笔记
---  

在学习C语言的时候，总是碰到__cdecl，一直都只是知道他是一种函数调用约定，

今天来总结一下函数的调用约定~

## 正文：

> ### 函数调用约定

当一个函数被调用时，函数的参数会被传递给调用的函数和返回值会被返回给调用函数。函数调用约定就是描述参数是怎么传递和由谁平衡堆栈的，当然还有返回值。
	
> 1.<font color="red" size="3">__cdecl</font>
	
	1>参数是从右向左传递的，也是从右向左放在堆栈中的
	
	2>堆栈平衡是由<font color="blue" size="3">调用函数</font>来执行的
	
	3>函数的前面会加一个前缀_(_Test)
	
> 2.<font color="red" size="3">__stdcall</font>

	1>参数是从右向左传递的，也是从右向左放在堆栈中的
	
	2>堆栈平衡是由<font color="black" size="3">被调用函数</font>来执行的

	3>在函数名前加下划线修饰，在函数名的后面由@来修饰并、加上栈需要的字节数的空间(_Test@8)
	
> 3.<font color="red" size="3">__fastcall</font>

	1>参数放在寄存器中，而不是栈中
	
	2>最左边的两个不大于4个字节的参数分别放在ecx和edx寄存器。当寄存器用完的时候，其余参数仍然从右往左的顺序压栈。
	
> 4.<font color="red" size="3">__thiscall</font>

	1>C++成员函数的默认调用约定，用于限制成员函数
	
	2>参数从右向左被推入堆栈
	
	3>通过ecx寄存器来传递this指针，将其传递到X86结构上，而不是堆栈上


转载请注明原地址：[Lucky-pxx的博客](http://www.bingoxin.top) » [点击阅读原文](http://www.bingoxin.top/2018/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/),谢谢！